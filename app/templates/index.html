<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="UTF-8" />
		<meta
			name="viewport"
			content="width=device-width, initial-scale=1, shrink-to-fit=no" />
		<title>ANP Decision Making</title>
		<link
			href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css"
			rel="stylesheet" />
	</head>
	<body>
		<div class="container mt-5">
			<h1 class="text-center mb-4">ANP Decision Making</h1>
			<p class="text-center">
				Data pada projek ini diambil dari kaggle berikut linknya
			</p>
			<a href="https://www.kaggle.com/datasets/shwetabh123/mall-customers"
				>Kaggle</a
			>
			<p>Nama Kelompok:</p>
			<p>1. Fazrul Akmal Fadila C0C022001</p>
			<p>2. Syafrie Abdunnasir Jawad C0C022011</p>
			<form
				id="anp-form"
				class="mb-4">
				<div class="form-group">
					<button
						type="submit"
						class="btn btn-primary btn-block">
						Calculate
					</button>
				</div>
			</form>
			<button
				id="show-data"
				class="btn btn-secondary btn-block mb-4">
				Show Raw Data
			</button>
			<div
				id="result"
				class="alert alert-info"
				style="display: none"></div>
			<div
				id="raw-data"
				class="alert alert-secondary"
				style="display: none"></div>
		</div>

		<script src="https://code.jquery.com/jquery-3.5.1.min.js"></script>
		<script>
			$("#anp-form").on("submit", function (event) {
				event.preventDefault();
				$.ajax({
					url: "/calculate",
					method: "POST",
					success: function (response) {
						$("#result")
							.html(
								"<h4>Result:</h4><pre>" +
									JSON.stringify(response, null, 2) +
									"</pre>",
							)
							.show();
					},
					error: function () {
						$("#result")
							.html('<p class="text-danger">An error occurred.</p>')
							.show();
					},
				});
			});

			$("#show-data").on("click", function () {
				$.ajax({
					url: "/data",
					method: "GET",
					success: function (response) {
						let table = '<table class="table table-bordered"><thead><tr>';
						for (const key of Object.keys(response[0])) {
							table += `<th>${key}</th>`;
						}
						table += "</tr></thead><tbody>";
						response.forEach((row) => {
							table += "<tr>";
							for (const key in row) {
								table += `<td>${row[key]}</td>`;
							}
							table += "</tr>";
						});
						table += "</tbody></table>";
						$("#raw-data")
							.html("<h4>Raw Data:</h4>" + table)
							.show();
					},
					error: function () {
						$("#raw-data")
							.html(
								'<p class="text-danger">An error occurred while fetching the raw data.</p>',
							)
							.show();
					},
				});
			});
		</script>
	</body>
</html>
